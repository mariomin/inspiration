<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/context
	http://www.springframework.org/schema/context/spring-context.xsd
	http://www.springframework.org/schema/beans
	http://www.springframework.org/schema/beans/spring-beans.xsd">

	<context:annotation-config />

	<bean id="downStreamManager" class="com.huatai.platform.downstream.DownStreamManager">
		<constructor-arg>
			<list>
				<ref bean="shseExchangeAdaptor" />
				<ref bean="szseExchangeAdaptor" />
			</list>
		</constructor-arg>
	</bean>

	<bean id="downstreamListener" class="com.huatai.platform.downstream.DownStreamListener"
		init-method="init" depends-on="transportFactory">
	</bean>

	<bean id="shseExchangeAdaptor" class="com.huatai.platform.downstream.adaptor.shse.ShseExchangeAdaptor">
		<constructor-arg>
			<list>
				<ref bean="shseDataSource" />
			</list>
		</constructor-arg>
		<constructor-arg ref="downstreamListener" />
		<property name="initDelay" value="1" />
		<property name="delay" value="50" />
	</bean>

	<bean id="exchangeHelper" class="com.huatai.platform.downstream.adaptor.common.ExchangeHelper">
		<property name="MIN_BEGIN_ORDER_ID_IN_BRANCH" value="500000" />
		<property name="MAX_END_ORDER_ID_IN_BRANCH" value="999999" />
		<property name="increase" value="1000" />
	</bean>
	
	<bean id="downStreamBackupDataService" class="com.huatai.platform.downstream.DownStreamBackupDataService" />

	<bean id="shseDataSource" class="com.huatai.platform.downstream.adaptor.shse.ShseDataSource"
		destroy-method="close">
		<property name="driverClassName" value="com.microsoft.sqlserver.jdbc.SQLServerDriver" />
		<property name="url"
			value="jdbc:sqlserver://168.168.202.132:1433;DatabaseName=SHSE" />
		<property name="username" value="root" />
		<property name="password" value="root" />
		<property name="ordwth" value="dev_ordwth" />
		<property name="ordwth2" value="dev_ordwth2" />
		<property name="cjhb" value="dev_cjhb" />
		<property name="pbu" value="1" />
	</bean>

	<bean id="szseExchangeAdaptor" class="com.huatai.platform.downstream.adaptor.szse.SzseExchangeAdaptor">
		<property name="charset" value="UTF-8" />
		<constructor-arg type="String">
			<value><![CDATA[
[default]
PersistMessages=Y
FileLogPath=log/fix/downstream/SZSEExchangeAdaptor-szse-001/log
FileStorePath=log/fix/downstream/SZSEExchangeAdaptor-szse-001/store
StartTime=00:00:00
EndTime=00:00:00
HeartBtInt=30
ReconnectInterval=5
ResetOnLogon=Y
UseDataDictionary=Y
ValidateUserDefinedFields=N
DefaultApplVerID=FIX.5.0SP2
CheckLatency=N
ConnectionType=initiator
AppDataDictionary=common/dic/szse/FIX50SP2.xml
TransportDataDictionary=common/dic/szse/FIXT11.xml

[session]
BeginString=FIXT.1.1
SenderCompID=dev.htquant-001.oms-001.fixDownStreamAdaptor-001
TargetCompID=sim_exchange
SocketConnectHost=168.168.202.132
SocketConnectPort=14005
		]]></value>
		</constructor-arg>
		<constructor-arg ref="downstreamListener" />
	</bean>

</beans>